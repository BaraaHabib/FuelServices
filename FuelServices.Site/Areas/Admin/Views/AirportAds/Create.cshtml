@model DBContext.Models.AirportAds
@inject IHttpContextAccessor HttpContextAccessor

@{
    ViewData["Title"] = "Create";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">
                        @ViewData["Title"]
                    </h3>
                </div>
                <div class="box-body">
                    <form asp-action="Create">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <input type="hidden" asp-for="AdvertisementId" value="@ViewBag.AdvertisementId" />
                        <div class="form-group">
                            <label asp-for="Range" class="control-label col-md-2"></label>
                            <select asp-for="Range" class="form-control" id="airport_ad">
                                <option value="3">Choose airports</option>
                                <option value="2">Choose a city(Ad will be shown in all this city airports)</option>
                                <option value="1">Choose a country(Ad will be shown in all this country airports)</option>
                            </select>
                            <span asp-validation-for="Range" class="text-danger"></span>
                        </div>
                        <div class="form-group" id="airportId_airport_ad">
                            <label asp-for="AirportId" class="control-label col-md-2"></label>
                            <select asp-for="AirportId" multiple id="AirportsId" class="form-control" asp-items="ViewBag.AirportId"></select>
                        </div>
                        <div class="form-group" id="CityId_airport_ad" style="display:none;">
                            <label class="control-label col-md-2">City</label>
                            <select asp-for="Airport.CityId" name="CityId" id="CityId" class="form-control" asp-items="ViewBag.CityId"></select>
                        </div>
                        <div class="form-group" id="CountryId_airport_ad" style="display:none;">
                            <label class="control-label col-md-2">Country</label>
                            <select asp-for="Airport.CountryId" name="CountryId" id="CountryId" class="form-control" asp-items="ViewBag.CountryId"></select>
                        </div>
                        <input type="hidden" asp-for="CaptionClicks" value="0" />

                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <input type="submit" value="Create" class="btn btn-default" />
                                <a class="btn btn-default" href="@Url.Action("Index", HttpContextAccessor.HttpContext.Session.GetString("ControllerName"), new { id = ViewBag.AirportId })">
                                    <i class="fas fa-chevron-circle-left"></i>Back to List
                                </a>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</section>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
<script>
    $(function () {
            $("#airport_ad").on("change", function () {
                var airport_ad_type = $("#airport_ad").val();
                switch (airport_ad_type) {
                    case "1":
                        $("#CountryId_airport_ad").show();
                        $("#CityId_airport_ad").hide();
                        $("#airportId_airport_ad").hide();
                        break;
                    case "2":
                        $("#CountryId_airport_ad").hide();
                        $("#CityId_airport_ad").show();
                        $("#airportId_airport_ad").hide();
                        break;
                    case "3":
                        $("#CountryId_airport_ad").hide();
                        $("#CityId_airport_ad").hide();
                        $("#airportId_airport_ad").show();
                        break;
                    default:
                        $("#CountryId_airport_ad").show();
                        $("#CityId_airport_ad").hide();
                        $("#airportId_airport_ad").hide();
                        break;
                }
            });
        });
</script>
}